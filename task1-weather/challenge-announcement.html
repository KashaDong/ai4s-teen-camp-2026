<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®æ¸…æ´—è¿‡ç¨‹å¯è§†åŒ– - æº¶è§£åº¦æ•°æ®</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(90deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            padding: 20px;
            gap: 20px;
        }
        
        .file-explorer {
            flex: 1;
            min-width: 300px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .file-viewer {
            flex: 2;
            min-width: 500px;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .folder {
            background: #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .folder-title {
            display: flex;
            align-items: center;
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .folder-icon {
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        .file-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .file-item:hover {
            transform: translateX(5px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .file-item.active {
            border-color: #3498db;
            background: #e8f4fd;
        }
        
        .file-item.processed {
            background: #eafaf1;
            border-color: #2ecc71;
        }
        
        .file-icon {
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        .file-name {
            flex: 1;
        }
        
        .file-status {
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 10px;
            background: #f1f1f1;
        }
        
        .status-pending {
            background: #ffebee;
            color: #e74c3c;
        }
        
        .status-processing {
            background: #fff3e0;
            color: #f39c12;
        }
        
        .status-completed {
            background: #e8f5e9;
            color: #2ecc71;
        }
        
        .file-content {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .data-table th {
            background: #3498db;
            color: white;
            padding: 12px 15px;
            text-align: left;
        }
        
        .data-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .data-table tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        .data-table tr:hover {
            background: #f1f8ff;
        }
        
        .missing-cell {
            background-color: #ffcccc !important;
            animation: pulse 1.5s infinite;
            font-weight: bold;
        }
        
        .current-cell {
            background-color: #ffffcc !important;
            border: 2px solid #f1c40f;
        }
        
        .filled-cell {
            background-color: #ccffcc !important;
        }
        
        .process-info {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
        }
        
        .process-step {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        button:hover {
            background: #2980b9;
            transform: translateY(-3px);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }
        
        .speed-control {
            margin-top: 15px;
        }
        
        .result-panel {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        @keyframes fileOpen {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .file-open {
            animation: fileOpen 0.5s ease-out;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            background: #f0f0f0;
            color: #666;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .file-explorer, .file-viewer {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>æ•°æ®æ¸…æ´—è¿‡ç¨‹å¯è§†åŒ–</h1>
            <p class="subtitle">æº¶è§£åº¦æ•°æ®ç¼ºå¤±å€¼å¡«è¡¥è¿‡ç¨‹</p>
        </header>
        
        <div class="main-content">
            <div class="file-explorer">
                <h2>æ•°æ®æ–‡ä»¶å¤¹</h2>
                <div class="folder">
                    <div class="folder-title">
                        <span class="folder-icon">ğŸ“</span>
                        data_training
                    </div>
                    <div class="file-list" id="file-list">
                        <!-- æ–‡ä»¶åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <div class="process-info">
                    <h3>å¤„ç†è¿›åº¦</h3>
                    <div id="process-steps">
                        <!-- å¤„ç†æ­¥éª¤å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <div class="controls">
                    <button id="start-btn">å¼€å§‹å¤„ç†</button>
                    <button id="pause-btn" disabled>æš‚åœ</button>
                    <button id="reset-btn">é‡ç½®</button>
                    
                    <div class="speed-control">
                        <label for="speed-slider">å¤„ç†é€Ÿåº¦:</label>
                        <input type="range" id="speed-slider" min="1" max="10" value="5">
                        <span id="speed-value">ä¸­é€Ÿ</span>
                    </div>
                </div>
            </div>
            
            <div class="file-viewer">
                <h2>æ–‡ä»¶å†…å®¹</h2>
                <div id="current-file">è¯·é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶å¼€å§‹å¤„ç†</div>
                
                <div class="file-content" id="file-content">
                    <!-- æ–‡ä»¶å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <h3>æ•°æ®è¡¨æ ¼</h3>
                <table class="data-table" id="data-table">
                    <!-- æ•°æ®è¡¨æ ¼å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </table>
                
                <div class="process-info" id="current-process">
                    <p>ç­‰å¾…å¼€å§‹å¤„ç†...</p>
                </div>
                
                <div class="result-panel">
                    <h3>å¤„ç†ç»“æœ</h3>
                    <div id="result-content">
                        <!-- å¤„ç†ç»“æœå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
        <p>Â© 2025 åºå‰æ·¼ã€æ±Ÿåª›åª›ã€ç‹ç§‹ç„¶åŠAI4S TEEN CUPç»„å§”ä¼š </p>
        </footer>
    </div>

    <script>
        // ä½¿ç”¨çœŸå®æ•°æ®
        const sampleFiles = {
            '5.csv': {
                name: '5.csv',
                content: `273.15,278.15,283.15,288.15,293.15,298.15,303.15,308.15,313.15,318.15,323.15,328.15,333.15,338.15,343.15
0.0112,0.0133,,0.0194,0.0229,0.0264,0.0311,0.0371,0.0543,0.0656,0.0792,0.0976,0.1192,0.1452,0.1761`,
                data: [
                    { temperature: 273.15, solubility: 0.0112 },
                    { temperature: 278.15, solubility: 0.0133 },
                    { temperature: 283.15, solubility: null },
                    { temperature: 288.15, solubility: 0.0194 },
                    { temperature: 293.15, solubility: 0.0229 },
                    { temperature: 298.15, solubility: 0.0264 },
                    { temperature: 303.15, solubility: 0.0311 },
                    { temperature: 308.15, solubility: 0.0371 },
                    { temperature: 313.15, solubility: 0.0543 },
                    { temperature: 318.15, solubility: 0.0656 },
                    { temperature: 323.15, solubility: 0.0792 },
                    { temperature: 328.15, solubility: 0.0976 },
                    { temperature: 333.15, solubility: 0.1192 },
                    { temperature: 338.15, solubility: 0.1452 },
                    { temperature: 343.15, solubility: 0.1761 }
                ]
            },
            '10.csv': {
                name: '10.csv',
                content: `273.15,278.15,283.15,288.15,293.15,298.15,303.15,308.15,313.15,318.15,323.15,328.15,333.15,338.15,343.15
0.0159,0.0208,0.0247,0.0291,0.0338,0.0406,0.0485,0.0579,0.0842,0.1026,0.1233,0.151,0.1858,,0.2771`,
                data: [
                    { temperature: 273.15, solubility: 0.0159 },
                    { temperature: 278.15, solubility: 0.0208 },
                    { temperature: 283.15, solubility: 0.0247 },
                    { temperature: 288.15, solubility: 0.0291 },
                    { temperature: 293.15, solubility: 0.0338 },
                    { temperature: 298.15, solubility: 0.0406 },
                    { temperature: 303.15, solubility: 0.0485 },
                    { temperature: 308.15, solubility: 0.0579 },
                    { temperature: 313.15, solubility: 0.0842 },
                    { temperature: 318.15, solubility: 0.1026 },
                    { temperature: 323.15, solubility: 0.1233 },
                    { temperature: 328.15, solubility: 0.151 },
                    { temperature: 333.15, solubility: 0.1858 },
                    { temperature: 338.15, solubility: null },
                    { temperature: 343.15, solubility: 0.2771 }
                ]
            },
            '15.csv': {
                name: '15.csv',
                content: `273.15,278.15,283.15,288.15,293.15,298.15,303.15,308.15,313.15,318.15,323.15,328.15,333.15,338.15,343.15
0.0289,0.0366,0.0461,0.0558,0.0677,0.0809,0.0975,,0.1675,0.2042,0.2475,0.3053,0.3726,0.4597,0.5654`,
                data: [
                    { temperature: 273.15, solubility: 0.0289 },
                    { temperature: 278.15, solubility: 0.0366 },
                    { temperature: 283.15, solubility: 0.0461 },
                    { temperature: 288.15, solubility: 0.0558 },
                    { temperature: 293.15, solubility: 0.0677 },
                    { temperature: 298.15, solubility: 0.0809 },
                    { temperature: 303.15, solubility: 0.0975 },
                    { temperature: 308.15, solubility: null },
                    { temperature: 313.15, solubility: 0.1675 },
                    { temperature: 318.15, solubility: 0.2042 },
                    { temperature: 323.15, solubility: 0.2475 },
                    { temperature: 328.15, solubility: 0.3053 },
                    { temperature: 333.15, solubility: 0.3726 },
                    { temperature: 338.15, solubility: 0.4597 },
                    { temperature: 343.15, solubility: 0.5654 }
                ]
            }
        };
        
        // æ‰§è¡ŒçŠ¶æ€
        let currentState = {
            isRunning: false,
            speed: 5,
            intervalId: null,
            currentFileIndex: 0,
            currentDataIndex: 0,
            processedFiles: {},
            fileOrder: ['5.csv', '10.csv', '15.csv']
        };
        
        // åˆå§‹åŒ–æ–‡ä»¶åˆ—è¡¨
        function initializeFileList() {
            const fileList = document.getElementById('file-list');
            fileList.innerHTML = '';
            
            currentState.fileOrder.forEach((fileName, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.id = `file-${fileName}`;
                
                if (index === currentState.currentFileIndex && currentState.isRunning) {
                    fileItem.classList.add('active');
                } else if (currentState.processedFiles[fileName]) {
                    fileItem.classList.add('processed');
                }
                
                fileItem.innerHTML = `
                    <span class="file-icon">ğŸ“„</span>
                    <span class="file-name">${fileName}</span>
                    <span class="file-status ${getFileStatus(fileName)}">${getStatusText(fileName)}</span>
                `;
                
                fileItem.addEventListener('click', () => {
                    if (!currentState.isRunning) {
                        showFileContent(fileName);
                    }
                });
                
                fileList.appendChild(fileItem);
            });
            
            // åˆå§‹åŒ–å¤„ç†æ­¥éª¤
            initializeProcessSteps();
        }
        
        // è·å–æ–‡ä»¶çŠ¶æ€
        function getFileStatus(fileName) {
            if (currentState.processedFiles[fileName]) {
                return 'status-completed';
            } else if (currentState.currentFileIndex === currentState.fileOrder.indexOf(fileName) && currentState.isRunning) {
                return 'status-processing';
            } else {
                return 'status-pending';
            }
        }
        
        // è·å–çŠ¶æ€æ–‡æœ¬
        function getStatusText(fileName) {
            if (currentState.processedFiles[fileName]) {
                return 'å·²å®Œæˆ';
            } else if (currentState.currentFileIndex === currentState.fileOrder.indexOf(fileName) && currentState.isRunning) {
                return 'å¤„ç†ä¸­';
            } else {
                return 'ç­‰å¾…å¤„ç†';
            }
        }
        
        // åˆå§‹åŒ–å¤„ç†æ­¥éª¤
        function initializeProcessSteps() {
            const processSteps = document.getElementById('process-steps');
            processSteps.innerHTML = '';
            
            const steps = [
                { id: 'step-1', text: 'æ‰“å¼€æ–‡ä»¶å¹¶è¯»å–æ•°æ®' },
                { id: 'step-2', text: 'æ£€æŸ¥æ•°æ®ä¸­çš„ç¼ºå¤±å€¼' },
                { id: 'step-3', text: 'å¡«è¡¥ç¼ºå¤±å€¼' },
                { id: 'step-4', text: 'ä¿å­˜å¤„ç†åçš„æ•°æ®' }
            ];
            
            steps.forEach((step, index) => {
                const stepElement = document.createElement('div');
                stepElement.className = 'process-step';
                stepElement.id = step.id;
                stepElement.textContent = `${index + 1}. ${step.text}`;
                processSteps.appendChild(stepElement);
            });
        }
        
        // æ˜¾ç¤ºæ–‡ä»¶å†…å®¹
        function showFileContent(fileName) {
            const file = sampleFiles[fileName];
            if (!file) return;
            
            document.getElementById('current-file').textContent = `å½“å‰æ–‡ä»¶: ${fileName}`;
            
            // æ˜¾ç¤ºæ–‡ä»¶å†…å®¹
            const fileContent = document.getElementById('file-content');
            fileContent.textContent = file.content;
            fileContent.classList.add('file-open');
            
            // æ˜¾ç¤ºæ•°æ®è¡¨æ ¼
            displayDataTable(file.data, fileName);
            
            // æ˜¾ç¤ºå¤„ç†ä¿¡æ¯
            const processInfo = document.getElementById('current-process');
            if (currentState.processedFiles[fileName]) {
                processInfo.innerHTML = `<p>âœ… æ–‡ä»¶ ${fileName} å·²å¤„ç†å®Œæˆ</p>`;
            } else {
                processInfo.innerHTML = `<p>â³ æ–‡ä»¶ ${fileName} ç­‰å¾…å¤„ç†</p>`;
            }
            
            // æ˜¾ç¤ºå¤„ç†ç»“æœ
            displayResults();
        }
        
        // æ˜¾ç¤ºæ•°æ®è¡¨æ ¼
        function displayDataTable(data, fileName) {
            const table = document.getElementById('data-table');
            const processedFile = currentState.processedFiles[fileName];
            
            table.innerHTML = `
                <thead>
                    <tr>
                        <th>æ¸©åº¦ (K)</th>
                        <th>æº¶è§£åº¦ (g)</th>
                        <th>çŠ¶æ€</th>
                    </tr>
                </thead>
                <tbody>
                    ${data.map((item, index) => {
                        let solubilityValue;
                        let status = 'æ­£å¸¸';
                        let cellClass = '';
                        
                        // æ£€æŸ¥æ˜¯å¦æœ‰å¡«è¡¥åçš„æ•°æ®
                        if (processedFile && processedFile.filledData[index] !== null) {
                            solubilityValue = processedFile.filledData[index];
                            if (item.solubility === null) {
                                status = 'å·²å¡«è¡¥';
                                cellClass = 'filled-cell';
                            }
                        } else {
                            solubilityValue = item.solubility;
                        }
                        
                        // å¦‚æœæ˜¯ç¼ºå¤±å€¼ä¸”æœªå¡«è¡¥
                        if (solubilityValue === null) {
                            status = 'ç¼ºå¤±';
                            cellClass = 'missing-cell';
                        }
                        
                        // å¦‚æœæ˜¯å½“å‰æ­£åœ¨å¤„ç†çš„æ•°æ®è¡Œ
                        if (currentState.isRunning && 
                            currentState.fileOrder[currentState.currentFileIndex] === fileName &&
                            index === currentState.currentDataIndex) {
                            cellClass = 'current-cell';
                        }
                        
                        return `
                            <tr>
                                <td>${item.temperature}</td>
                                <td class="${cellClass}">${solubilityValue === null ? 'NaN' : solubilityValue.toFixed(4)}</td>
                                <td>${status}</td>
                            </tr>
                        `;
                    }).join('')}
                </tbody>
            `;
        }
        
        // æ˜¾ç¤ºå¤„ç†ç»“æœ
        function displayResults() {
            const resultContent = document.getElementById('result-content');
            resultContent.innerHTML = '';
            
            if (Object.keys(currentState.processedFiles).length === 0) {
                resultContent.innerHTML = '<p>æš‚æ— å¤„ç†ç»“æœ</p>';
                return;
            }
            
            for (const [fileName, result] of Object.entries(currentState.processedFiles)) {
                const resultItem = document.createElement('div');
                resultItem.className = 'result-item';
                
                const missingCount = result.originalData.filter(item => item.solubility === null).length;
                const filledCount = result.filledData.filter((val, index) => 
                    result.originalData[index].solubility === null && val !== null
                ).length;
                
                resultItem.innerHTML = `
                    <span>${fileName}</span>
                    <span>å¡«è¡¥äº† ${filledCount} ä¸ªç¼ºå¤±å€¼</span>
                `;
                
                resultContent.appendChild(resultItem);
            }
        }
        
        // é«˜äº®å¤„ç†æ­¥éª¤
        function highlightProcessStep(stepIndex) {
            // é‡ç½®æ‰€æœ‰æ­¥éª¤
            for (let i = 1; i <= 4; i++) {
                const stepElement = document.getElementById(`step-${i}`);
                if (stepElement) {
                    stepElement.style.background = 'white';
                    stepElement.style.fontWeight = 'normal';
                }
            }
            
            // é«˜äº®å½“å‰æ­¥éª¤
            if (stepIndex >= 1 && stepIndex <= 4) {
                const currentStep = document.getElementById(`step-${stepIndex}`);
                if (currentStep) {
                    currentStep.style.background = '#e8f4fd';
                    currentStep.style.fontWeight = 'bold';
                }
            }
        }
        
        // æ‰§è¡Œä¸‹ä¸€æ­¥
        function executeNextStep() {
            if (currentState.currentFileIndex >= currentState.fileOrder.length) {
                // æ‰€æœ‰æ–‡ä»¶å¤„ç†å®Œæˆ
                stopExecution();
                document.getElementById('current-process').innerHTML = 
                    '<p>âœ… æ‰€æœ‰æ–‡ä»¶å¤„ç†å®Œæˆï¼</p>';
                return;
            }
            
            const currentFileName = currentState.fileOrder[currentState.currentFileIndex];
            const currentFile = sampleFiles[currentFileName];
            
            // æ›´æ–°æ–‡ä»¶åˆ—è¡¨é«˜äº®
            initializeFileList();
            
            // æ˜¾ç¤ºå½“å‰æ–‡ä»¶å†…å®¹
            showFileContent(currentFileName);
            
            // æ ¹æ®å½“å‰çŠ¶æ€æ‰§è¡Œç›¸åº”æ­¥éª¤
            if (!currentState.processedFiles[currentFileName]) {
                // ç¬¬ä¸€æ­¥ï¼šæ‰“å¼€æ–‡ä»¶å¹¶è¯»å–æ•°æ®
                highlightProcessStep(1);
                document.getElementById('current-process').innerHTML = 
                    `<p>ğŸ“‚ æ‰“å¼€æ–‡ä»¶ ${currentFileName} å¹¶è¯»å–æ•°æ®...</p>`;
                
                // åˆå§‹åŒ–å¤„ç†ç»“æœ
                currentState.processedFiles[currentFileName] = {
                    originalData: [...currentFile.data],
                    filledData: currentFile.data.map(item => item.solubility),
                    currentIndex: 0
                };
                
                currentState.currentDataIndex = 0;
            } else {
                const processedFile = currentState.processedFiles[currentFileName];
                
                if (currentState.currentDataIndex < currentFile.data.length) {
                    // ç¬¬äºŒæ­¥ï¼šæ£€æŸ¥æ•°æ®ä¸­çš„ç¼ºå¤±å€¼
                    highlightProcessStep(2);
                    
                    const currentData = currentFile.data[currentState.currentDataIndex];
                    
                    if (currentData.solubility === null) {
                        // ç¬¬ä¸‰æ­¥ï¼šå¡«è¡¥ç¼ºå¤±å€¼
                        highlightProcessStep(3);
                        
                        // æŸ¥æ‰¾å‰ä¸€ä¸ªæœ‰æ•ˆå€¼
                        let prevVal = null;
                        for (let i = currentState.currentDataIndex - 1; i >= 0; i--) {
                            if (currentFile.data[i].solubility !== null) {
                                prevVal = currentFile.data[i].solubility;
                                break;
                            }
                        }
                        
                        // æŸ¥æ‰¾åä¸€ä¸ªæœ‰æ•ˆå€¼
                        let nextVal = null;
                        for (let i = currentState.currentDataIndex + 1; i < currentFile.data.length; i++) {
                            if (currentFile.data[i].solubility !== null) {
                                nextVal = currentFile.data[i].solubility;
                                break;
                            }
                        }
                        
                        if (prevVal !== null && nextVal !== null) {
                            const avg = (prevVal + nextVal) / 2;
                            processedFile.filledData[currentState.currentDataIndex] = avg;
                            
                            document.getElementById('current-process').innerHTML = `
                                <p>ğŸ”§ å¡«è¡¥ç¼ºå¤±å€¼: ä½ç½® ${currentState.currentDataIndex + 1} (${currentData.temperature}K)</p>
                                <p>ä½¿ç”¨å‰å€¼ ${prevVal.toFixed(4)} å’Œåå€¼ ${nextVal.toFixed(4)} çš„å¹³å‡å€¼ ${avg.toFixed(4)}</p>
                            `;
                        } else {
                            document.getElementById('current-process').innerHTML = 
                                `<p>âš ï¸ æ— æ³•å¡«è¡¥ä½ç½® ${currentState.currentDataIndex + 1} çš„ç¼ºå¤±å€¼ (ç¼ºå°‘å‰åæœ‰æ•ˆå€¼)</p>`;
                        }
                    } else {
                        document.getElementById('current-process').innerHTML = 
                            `<p>âœ“ ä½ç½® ${currentState.currentDataIndex + 1} çš„å€¼æ­£å¸¸: ${currentData.solubility.toFixed(4)}</p>`;
                    }
                    
                    currentState.currentDataIndex++;
                } else {
                    // ç¬¬å››æ­¥ï¼šä¿å­˜å¤„ç†åçš„æ•°æ®
                    highlightProcessStep(4);
                    document.getElementById('current-process').innerHTML = 
                        `<p>ğŸ’¾ æ–‡ä»¶ ${currentFileName} å¤„ç†å®Œæˆï¼Œä¿å­˜ç»“æœ...</p>`;
                    
                    // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªæ–‡ä»¶
                    currentState.currentFileIndex++;
                    currentState.currentDataIndex = 0;
                }
            }
            
            // æ›´æ–°æ•°æ®è¡¨æ ¼æ˜¾ç¤º
            displayDataTable(currentFile.data, currentFileName);
        }
        
        // å¼€å§‹æ‰§è¡Œ
        function startExecution() {
            if (currentState.isRunning) return;
            
            currentState.isRunning = true;
            document.getElementById('start-btn').disabled = true;
            document.getElementById('pause-btn').disabled = false;
            
            const speedMap = {
                1: 2000, 2: 1500, 3: 1200, 4: 1000, 5: 800,
                6: 600, 7: 400, 8: 300, 9: 200, 10: 100
            };
            
            currentState.intervalId = setInterval(executeNextStep, speedMap[currentState.speed]);
        }
        
        // æš‚åœæ‰§è¡Œ
        function pauseExecution() {
            if (!currentState.isRunning) return;
            
            currentState.isRunning = false;
            clearInterval(currentState.intervalId);
            document.getElementById('start-btn').disabled = false;
            document.getElementById('pause-btn').disabled = true;
        }
        
        // åœæ­¢æ‰§è¡Œ
        function stopExecution() {
            currentState.isRunning = false;
            clearInterval(currentState.intervalId);
            document.getElementById('start-btn').disabled = false;
            document.getElementById('pause-btn').disabled = true;
        }
        
        // é‡ç½®æ‰§è¡Œ
        function resetExecution() {
            stopExecution();
            currentState = {
                isRunning: false,
                speed: 5,
                intervalId: null,
                currentFileIndex: 0,
                currentDataIndex: 0,
                processedFiles: {},
                fileOrder: ['5.csv', '10.csv', '15.csv']
            };
            
            initializeFileList();
            document.getElementById('current-file').textContent = 'è¯·é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶å¼€å§‹å¤„ç†';
            document.getElementById('file-content').textContent = '';
            document.getElementById('data-table').innerHTML = '';
            document.getElementById('current-process').innerHTML = '<p>ç­‰å¾…å¼€å§‹å¤„ç†...</p>';
            document.getElementById('result-content').innerHTML = '<p>æš‚æ— å¤„ç†ç»“æœ</p>';
            
            highlightProcessStep(0);
        }
        
        // åˆå§‹åŒ–é¡µé¢
        window.onload = function() {
            initializeFileList();
            
            // é»˜è®¤æ˜¾ç¤ºç¬¬ä¸€ä¸ªæ–‡ä»¶
            showFileContent('5.csv');
            
            // äº‹ä»¶ç›‘å¬
            document.getElementById('start-btn').addEventListener('click', startExecution);
            document.getElementById('pause-btn').addEventListener('click', pauseExecution);
            document.getElementById('reset-btn').addEventListener('click', resetExecution);
            
            document.getElementById('speed-slider').addEventListener('input', function() {
                currentState.speed = parseInt(this.value);
                const speedText = ['å¾ˆæ…¢', 'æ…¢', 'è¾ƒæ…¢', 'ç¨æ…¢', 'ä¸­é€Ÿ', 'ç¨å¿«', 'è¾ƒå¿«', 'å¿«', 'å¾ˆå¿«', 'æœ€å¿«'];
                document.getElementById('speed-value').textContent = speedText[currentState.speed - 1];
                
                // å¦‚æœæ­£åœ¨æ‰§è¡Œï¼Œé‡æ–°è®¾ç½®é—´éš”
                if (currentState.isRunning) {
                    pauseExecution();
                    startExecution();
                }
            });
        };
    </script>
</body>
</html>